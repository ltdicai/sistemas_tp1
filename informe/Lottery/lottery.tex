\subsection{Lottery Scheduling}

La idea detr\'as de $lottery$ $scheduling$\cite{SchedLottery} es aplicar un enfoque probabil\'istico y pseudoaleatorio a la hora de asignar recursos a las tareas. Para lograr esto se utiliza un sistema de $tickets$ que representan derechos de acceso a recursos; las tareas poseen una cantidad determinada de $tickets$, puediendo ser distinta de una tarea a otra y cada vez que el $scheduler$ decide a qu\'e tarea otorgar los recursos lo hace mediante una loter\'ia, elige uno entre todos los $tickets$ del sistema. El proceso que tenga ese $ticket$ ser\'a el ganador y se le asignar\'a el recurso que est\'a demandado.

Los $tickets$ son una forma de cuantificar los derechos de acceso a recursos; cuantos m\'as $tickets$ tenga una tarea, m\'as probable es que gane la loter\'ia. Tambi\'en permiten homogeneizar los diferentes tipos de recursos ya que todos son representados por los mismos tipos de $tickets$, esto aporta flexibilidad a la hora de asignarlos.

\subsubsection{Loter\'ias}

En cada $tick$ del reloj, el $scheduler$ toma una decisi\'on: si el proceso en ejecuci\'on agot\'o todo su quantum asignado, realiz\'o una llamada bloqueante o simplemente termin\'o exitosamente entonces se lleva a cabo una loter\'ia. Est\'a loter\'ia decide qui\'en va a ser el pr\'oximo proceso en utilizar el recurso deseado. Elegir el $ticket$ ganador se realiza mediante un algoritmo pseudoaleatorio que lo elige de manera uniforme, esto es, todos los tickets tienen una probabilidad igual de ganar la loter\'ia, a saber:

Sea $n$ la cantidad de $tickets$ y \{t$_i$\}$_{1 \leq i \leq n}$ el conjunto de ellos.

\[
	P(t_{i}) = \frac{1}{n}
\]

Luego, la probabilidad que un proceso $j$ que posee $t$ cantidad de $tickets$ gane la loter\'ia es igual a:


\[
	P(j \text{ gane la loter\'ia}) = \sum_{1}^{t}\frac{1}{n} = \frac{t}{n}
\]

Se puede probar que la cantidad de loter\'ias ganadas por la tarea $j$ sigue una distribuci\'on binomial de par\'ametro $p = \frac{t}{n}$. De esta manera se observa que la esperanza de la cantidad de loter\'ias ganadas por una tarea es igual a:

\[
	E(\text{cantidad de loter\'ias ganadas}) = \frac{t}{n}*\text{cantidad de loter\'ias realizadas}
\]

Esto implica que el valor promedio de la cantidad de loter\'ias ganadas es directamente proporcional a la cantidad de $tickets$ que posee la tarea. Por esta raz\'on se dice que $lottery$ $scheduling$ es probabil\'isticamente justo.

\subsubsection{Fairness}

\subsubsection{Compensation tickets}

Queremos ver cómo se comporta el algoritmo ante un lote de tareas compuesto por
tareas que sólo utilizan CPU y otras que realizan llamadas bloqueantes.\\

Si SchedLottery no contara con compensation tickets entonces como se explica en el artículo \cite[Sec. 3.4]{SchedLottery} el problema se 
ocasiona cuando una tarea se bloquea sin terminar de utilizar su quantum.
De continuar así por varios ciclos entonces esa tarea usaría, en promedio, menos CPU que las demás
(la probabilidad de ganar el sorteo es la misma para todas, pero en este caso habría tareas que
usan más tiempo el CPU que las demás)
violando así la regla de 1:1 dónde todas deberían recibir la misma proporción de CPU.\\

La forma propuesta para contrarrestar este problema es Compensation Tickets. 
Consiste en dar a la tarea bloqueada una cantidad de tickets en relación con el quantum no utilizado.
Así, si sólo utilizó una fracción $f$ del quantum le son dados $cant\_inicial/f$ tickets.\\

Queremos mostrar evidencia de que el sistema de compensation tickets (CT) corrige el problema
previamente mencionado sobre la asignación de CPU esperada entre tareas bloqueantes y no bloqueantes.
Para esto ejecutamos dos tareas, una taskBatch, ya que el problema se manifiesta cuando existen llamadas bloqueantes, y la otra taskCPU.\\

Al comienzo cada tarea posee 10 tickets (misma probabilidad de ganar) porque queremos que se ejecuten equitativamente.\\

\paragraoh{SchedLottery sin CT:}

TaskCPU:
\begin{itemize}
 \item CPU time: 51
 \item Response time etc etc 			$ COMPLETAAAAAAAAAAAAAAAR  $    %COMPLETAR!!!!
\end{itemize}

TaskBatch:
\begin{itemize}
 \item CPU total:
\end{itemize}

\paragraoh{SchedLottery con CT:}

TaskCPU:
\begin{itemize}
 \item CPU total:
 \item Response time etc etc 			$ COMPLETAAAAAAAAAAAAAAAR  $    %COMPLETAR!!!!
\end{itemize}

TaskBatch:
\begin{itemize}
 \item CPU total:
\end{itemize}

